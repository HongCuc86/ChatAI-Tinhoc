<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tr·ª£ l√Ω h·ªçc t·∫≠p ‚Äî Chatbox (Landbot embed)</title>
  <style>
    :root{--bg:#eaf4ff;--card:#ffffff;--accent:#1e88e5;--muted:#6b7280}
    body{margin:0;font-family:Inter,Segoe UI,Roboto,system-ui,-apple-system,"Helvetica Neue",Arial;background:var(--bg);color:#0f172a}
    .topbar{display:flex;align-items:center;gap:12px;padding:18px 22px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:58px;height:58px;border-radius:12px;background:linear-gradient(135deg,#cfeeff,#a6ddff);display:flex;align-items:center;justify-content:center;font-weight:700;color:#083c63}
    .container{max-width:980px;margin:22px auto;padding:22px}
    .card{background:var(--card);border-radius:16px;padding:18px;box-shadow:0 6px 18px rgba(12,38,63,0.06)}

    /* Chat widget bubble */
    .chat-bubble{position:fixed;right:22px;bottom:22px;width:74px;height:74px;border-radius:999px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:white;box-shadow:0 8px 24px rgba(30,136,229,0.24);cursor:pointer}
    .chat-bubble small{display:block;font-size:11px}

    /* Overlay with iframe */
    .overlay{position:fixed;right:22px;bottom:110px;width:380px;height:640px;border-radius:14px;overflow:hidden;background:transparent;box-shadow:0 18px 60px rgba(2,6,23,0.28);display:none;z-index:9999}
    .overlay .header{height:62px;background:linear-gradient(90deg,var(--accent),#64b5f6);display:flex;align-items:center;padding:10px 12px;color:white}
    .overlay .header .title{font-weight:700;margin-left:10px}
    .overlay iframe{width:100%;height:calc(100% - 62px);border:0}

    /* Controls inside page */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    .btn.secondary{background:#f3f6fb;color:var(--accent);border:1px solid #dbeefd}

    .section{margin-top:16px}
    .hint{font-size:14px;color:var(--muted)}

    /* Small helper */
    .copy-hint{background:#eef7ff;padding:10px;border-radius:10px;margin-top:12px;color:#083c63}

    footer{max-width:980px;margin:22px auto;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <div class="logo">AI</div>
      <div>
        <div style="font-weight:700">Tr·ª£ l√Ω h·ªçc t·∫≠p AI</div>
        <div style="font-size:13px;color:var(--muted)">Giao di·ªán demo + ch·ªó nh√∫ng Landbot</div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <h2>H∆∞·ªõng d·∫´n nhanh</h2>
      <p class="hint">Trang n√†y l√† **m·ªôt trang web m·∫´u** (HTML/CSS/JS) ƒë·ªÉ nh√∫ng chatbox Landbot. B·∫°n c√≥ th·ªÉ d√πng ƒëo·∫°n m√£ trang n√†y, thay <code>YOUR_LANDBOT_URL</code> b·∫±ng link bot c·ªßa b·∫°n, r·ªìi t·∫£i l√™n GitHub Pages ho·∫∑c Netlify ƒë·ªÉ c√≥ link truy c·∫≠p.</p>

      <div class="section">
        <h3>1) Giao di·ªán chat (bot hi·ªán ·ªü g√≥c ph·∫£i)</h3>
        <p class="hint">Nh·∫•n n√∫t chat d∆∞·ªõi g√≥c ph·∫£i ƒë·ªÉ m·ªü c·ª≠a s·ªï chat (iframe ch·ª©a Landbot). Microphone s·∫Ω chuy·ªÉn gi·ªçng n√≥i sang vƒÉn b·∫£n v√† sao ch√©p v√†o clipboard. Sau ƒë√≥ d√°n v√†o √¥ nh·∫≠p trong chat Landbot (Ctrl+V / D√°n).</p>
        <div class="controls">
          <button id="openChat" class="btn">M·ªü Chat</button>
          <button id="closeChat" class="btn secondary">ƒê√≥ng Chat</button>
          <button id="startRec" class="btn">üéôÔ∏è Ghi √¢m</button>
        </div>
        <div class="copy-hint" id="copyHint" style="display:none">VƒÉn b·∫£n ƒë√£ ƒë∆∞·ª£c sao ch√©p v√†o clipboard. Vui l√≤ng chuy·ªÉn v√†o khung chat v√† d√°n (Ctrl+V).</div>
      </div>

      <div class="section">
        <h3>2) C√°ch nh√∫ng Landbot</h3>
        <p class="hint">Trong file n√†y, t√¨m bi·∫øn <code>LAND_BOT_URL</code> ·ªü ph·∫ßn <code>&lt;script&gt;</code> b√™n d∆∞·ªõi v√† thay b·∫±ng link bot c·ªßa b·∫°n (v√≠ d·ª•: <code>https://yourbot.landbot.io/v3/...</code>)</p>
      </div>

      <div class="section">
        <h3>3) G·ª£i √Ω hosting</h3>
        <ul class="hint">
          <li>GitHub Pages: T·∫°o repo, ƒë·∫©y file index.html, b·∫≠t Pages tr√™n nh√°nh main ‚Äî website c√≥ d·∫°ng <code>https://username.github.io/repo/</code>.</li>
          <li>Netlify: K√©o th·∫£ file l√™n Netlify Drop ho·∫∑c deploy t·ª´ GitHub ‚Äî nh·∫≠n link ngay.</li>
        </ul>
      </div>

    </div>
  </div>

  <div class="chat-bubble" id="chatBubble" title="M·ªü tr·ª£ l√Ω h·ªçc t·∫≠p">
    üí¨
  </div>

  <div class="overlay" id="overlay">
    <div class="header">
      <div style="width:44px;height:44px;border-radius:10px;background:#fff8;display:flex;align-items:center;justify-content:center">ü§ñ</div>
      <div style="margin-left:10px">
        <div class="title">Tr·ª£ l√Ω h·ªçc t·∫≠p AI</div>
        <div style="font-size:12px;opacity:0.9">N√≥i ho·∫∑c g√µ ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
      </div>
    </div>
    <!-- Replace the iframe src with your Landbot webchat URL. -->
    <iframe id="botFrame" src="about:blank" title="Landbot chat iframe"></iframe>
  </div>

  <footer>Phi√™n b·∫£n m·∫´u ‚Ä¢ Thay <code>LAND_BOT_URL</code> trong m√£ b·∫±ng URL c·ªßa bot Landbot c·ªßa b·∫°n<br>Kh√¥ng l∆∞u tr·ªØ n·ªôi dung AI ‚Äî ch·ªâ demo giao di·ªán.</footer>

  <script>
    // ----- CONFIG -----
    // Thay gi√° tr·ªã n√†y b·∫±ng link bot Landbot c·ªßa b·∫°n (Web chat URL ho·∫∑c page URL).
    const LAND_BOT_URL = 'https://hongcuc86.github.io/ChatAI-Tinhoc/'; // <-- <<--- THAY CH·ªñ N√ÄY

    // UI elements
    const chatBubble = document.getElementById('chatBubble');
    const overlay = document.getElementById('overlay');
    const botFrame = document.getElementById('botFrame');
    const openBtn = document.getElementById('openChat');
    const closeBtn = document.getElementById('closeChat');
    const startRec = document.getElementById('startRec');
    const copyHint = document.getElementById('copyHint');

    function openOverlay(){
      if (LAND_BOT_URL === 'YOUR_LANDBOT_URL'){
        alert('Vui l√≤ng ch·ªânh s·ª≠a file: thay YOUR_LANDBOT_URL b·∫±ng link Landbot c·ªßa b·∫°n.');
        return;
      }
      botFrame.src = LAND_BOT_URL;
      overlay.style.display = 'block';
    }
    function closeOverlay(){ overlay.style.display = 'none'; }

    chatBubble.addEventListener('click', openOverlay);
    openBtn.addEventListener('click', openOverlay);
    closeBtn.addEventListener('click', closeOverlay);

    // ----- Speech to Text (Web Speech API) -----
    // L∆∞u √Ω: ch·ªâ ho·∫°t ƒë·ªông tr√™n https ho·∫∑c localhost v√† tr√¨nh duy·ªát h·ªó tr·ª£ (Chrome, Edge).
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition){
      startRec.disabled = true;
      startRec.textContent = 'üéôÔ∏è Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ghi √¢m';
    } else {
      const recognition = new SpeechRecognition();
      recognition.lang = 'vi-VN';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      startRec.addEventListener('click', ()=>{
        recognition.start();
        startRec.textContent = 'üéôÔ∏è ƒêang nghe...';
      });

      recognition.addEventListener('result', (e)=>{
        const text = e.results[0][0].transcript.trim();
        // Sao ch√©p v√†o clipboard v√† hi·ªÉn th·ªã g·ª£i √Ω ƒë·ªÉ d√°n v√†o chat bot
        navigator.clipboard.writeText(text).then(()=>{
          copyHint.style.display = 'block';
          copyHint.textContent = 'ƒê√£ sao ch√©p: "' + text + '" ‚Äî H√£y d√°n (Ctrl+V) v√†o √¥ nh·∫≠p c·ªßa chat bot ƒë·ªÉ g·ª≠i.';
          setTimeout(()=>copyHint.style.display = 'none', 8000);
        }).catch(()=>{
          copyHint.style.display = 'block';
          copyHint.textContent = 'Kh√¥ng th·ªÉ sao ch√©p t·ª± ƒë·ªông. VƒÉn b·∫£n: "'+text+'"';
        });

        startRec.textContent = 'üéôÔ∏è Ghi √¢m';
      });

      recognition.addEventListener('end', ()=>{ startRec.textContent = 'üéôÔ∏è Ghi √¢m'; });
      recognition.addEventListener('error', (err)=>{ startRec.textContent = 'üéôÔ∏è Ghi √¢m'; alert('L·ªói ghi √¢m: '+err.message); });
    }

    // Small UX: if user closes overlay, pause iframe
    window.addEventListener('message', (ev)=>{
      // Reserved for future extension if Landbot supports postMessage
    });

    // Keyboard shortcut: press 'L' to open/close the chat
    document.addEventListener('keydown', (e)=>{
      if (e.key.toLowerCase() === 'l'){
        if (overlay.style.display === 'block') closeOverlay(); else openOverlay();
      }
    });
  </script>
</body>
</html>
